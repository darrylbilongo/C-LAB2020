{"ast":null,"code":"var _jsxFileName = \"C:\\\\DevWeb\\\\site\\\\C-LAB2020\\\\front-end\\\\src\\\\components\\\\Profile.js\";\nimport React, { Component } from \"react\";\nimport axios from 'axios';\nimport ReactAudioPlayer from 'react-audio-player';\nimport jwt_decode from 'jwt-decode';\nimport { Link } from 'react-router-dom';\n\nclass Profile extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onClickHandler = () => {\n      const data = new FormData();\n      data.append('id', this.state.user.id);\n      data.append('file', this.state.selectedFile);\n      axios.post(\"http://localhost:8080/upload\", data, {\n        onUploadProgress: ProgressEvent => {\n          this.setState({\n            loaded: ProgressEvent.loaded / ProgressEvent.total * 100\n          });\n        }\n      }).then(res => {\n        // then print response status\n        console.log(res.statusText);\n      }).catch(err => console.log(err));\n    };\n\n    this.state = {\n      user: {},\n      showNote: false,\n      showAvis: false,\n      hideCollab: true,\n      currentUser: '',\n      like: false,\n      selectedFile: null,\n      note: 0,\n      loaded: 0,\n      contents: []\n    };\n    this.collabore = this.collabore.bind(this);\n    this.avis = this.avis.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.onChangeHandler = this.onChangeHandler.bind(this);\n    this.onClickHandler = this.onClickHandler.bind(this);\n  }\n\n  async componentWillMount() {\n    const {\n      id\n    } = this.props.match.params;\n    await axios.post('http://localhost:8080/contents/get', {\n      UserId: id\n    }).then(res => {\n      this.setState({\n        contents: res.data\n      });\n    }).catch(err => console.log(err));\n  }\n\n  async componentDidMount() {\n    const {\n      id\n    } = this.props.match.params;\n    axios.get('http://localhost:8080/users/' + id).then(res => {\n      console.log(res.data);\n      this.setState({\n        user: res.data\n      });\n    }).catch(err => console.log(err));\n    const token = await localStorage.getItem('usertoken');\n    const decoded = jwt_decode(token);\n    this.setState({\n      currentUser: decoded\n    });\n    /*axios.get('http://localhost:8080/contents/', {\r\n        UserId : id\r\n    }).then(res => {\r\n        console.log(res)\r\n        this.setState({\r\n            contents : res.data\r\n        })\r\n    })*/\n  }\n\n  onChangeHandler(event) {\n    this.setState({\n      selectedFile: event.target.files[0],\n      loaded: 0\n    });\n    console.log(event.target.files[0]);\n  }\n\n  collabore() {\n    this.setState({\n      showAvis: true,\n      hideCollab: false\n    });\n    axios.put('http://localhost:8080/users/' + this.state.user.id, {\n      note: this.state.user.note + 1\n    });\n  }\n\n  avis() {\n    axios.post('/opinion', {\n      firstName: 'Fred',\n      lastName: 'Flintstone'\n    }).then(function (response) {\n      console.log(response);\n    });\n  }\n\n  handleChange(e) {\n    this.setState({\n      avis: e.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    console.log(this.state.user.id, this.state.avis);\n    axios.post('/opinions', {\n      user: this.state.user.id,\n      avis: this.state.avis\n    }).then(function (res) {\n      console.log(res);\n    });\n  }\n\n  render() {\n    axios.put('http://localhost:8080/users/' + this.state.user.id, {\n      note: this.state.user.note - 1\n    });\n  }\n\n  render() {\n    const Chat = () => {\n      const {\n        id\n      } = this.props.match.params;\n\n      if (this.state.currentUser.id === this.state.user.id) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: {\n          pathname: `/chat/` + id\n        },\n        className: \"nav-link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-block btn-ln btn-light\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 29\n        }\n      }, \"Chat\")));\n    };\n\n    const Vote = () => {\n      if (this.state.currentUser.id === this.state.user.id) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }\n      }, \"As-tu appr\\xE9ci\\xE9 cet artiste? \", this.state.like ? \"Tu as aimé ce profil\" : \"Tu n'as pas aimé\", /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.voteAime,\n        type: \"submit\",\n        className: \"btn btn-block btn-lg btn-success\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 25\n        }\n      }, \"J'aime\"), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.voteAimePas,\n        type: \"submit\",\n        className: \"btn btn-block btn-lg btn-danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 25\n        }\n      }, \"Je n'aime pas\"));\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"videode\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"video\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"details\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 22\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 21\n      }\n    }, \"Votre description\"), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"list-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 25\n      }\n    }, \"Nom : \", this.state.user.last_name), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 25\n      }\n    }, \"Pr\\xE9nom : \", this.state.user.first_name), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 25\n      }\n    }, \"Adresse Mail : \", this.state.user.email), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 25\n      }\n    }, \"Role : \", this.state.user.role), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 25\n      }\n    }, \"Description :\"), this.state.hideCollab ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 26\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.collabore,\n      type: \"submit\",\n      className: \"btn btn-block btn-lg btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 29\n      }\n    }, \"Clique-ici pour \\xE9crire un avis sur cet artiste\")) : null, this.state.showAvis ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onClick: e => {\n        this.handleSubmit(e);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.value,\n      onChange: this.handleChange,\n      rows: \"5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 41\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: e => e.preventDefault(),\n      className: \"btn btn-block btn-lg btn-danger\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 37\n      }\n    }, \"Envoyer\")))) : null), Chat())), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      onSubmit: this.handleImport,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"offset-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 29\n      }\n    }, \"Importez une de vos oeuvres: \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      className: \"form-control-file\",\n      onChange: this.onChangeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.onClickHandler,\n      className: \"btn-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 21\n      }\n    }, \" Importer\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 17\n      }\n    }, this.state.contents.map(content => {\n      return /*#__PURE__*/React.createElement(ReactAudioPlayer, {\n        src: 'http://localhost:8080/' + content.link,\n        autoPlay: \"false\",\n        controls: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 32\n        }\n      });\n    })));\n  }\n\n}\n\nexport default Profile;","map":{"version":3,"sources":["C:/DevWeb/site/C-LAB2020/front-end/src/components/Profile.js"],"names":["React","Component","axios","ReactAudioPlayer","jwt_decode","Link","Profile","constructor","props","onClickHandler","data","FormData","append","state","user","id","selectedFile","post","onUploadProgress","ProgressEvent","setState","loaded","total","then","res","console","log","statusText","catch","err","showNote","showAvis","hideCollab","currentUser","like","note","contents","collabore","bind","avis","handleChange","handleSubmit","onChangeHandler","componentWillMount","match","params","UserId","componentDidMount","get","token","localStorage","getItem","decoded","event","target","files","put","firstName","lastName","response","e","value","preventDefault","render","Chat","pathname","Vote","voteAime","voteAimePas","last_name","first_name","email","role","handleImport","map","content","link"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from 'axios';\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport jwt_decode from 'jwt-decode';\r\nimport {Link} from 'react-router-dom';\r\n\r\nclass Profile extends Component{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n          user: {},\r\n          showNote: false,\r\n          showAvis: false,\r\n          hideCollab: true,\r\n          currentUser :'',\r\n          like: false,\r\n          selectedFile: null,\r\n          note: 0,\r\n          loaded: 0,\r\n          contents: [],\r\n        };\r\n      \r\n        this.collabore=this.collabore.bind(this);\r\n        this.avis=this.avis.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.onChangeHandler = this.onChangeHandler.bind(this);\r\n        this.onClickHandler = this.onClickHandler.bind(this);\r\n    }\r\n\r\n    async componentWillMount() {\r\n        const { id } = this.props.match.params\r\n        \r\n        await axios.post('http://localhost:8080/contents/get', {\r\n            UserId : id\r\n        }).then(res => {\r\n            this.setState({\r\n                contents : res.data\r\n            })\r\n        }).catch(err => console.log(err))\r\n\r\n    }\r\n    \r\n  async componentDidMount(){\r\n        const { id } = this.props.match.params\r\n\r\n        axios.get('http://localhost:8080/users/' + id)\r\n            .then((res) => {\r\n                console.log(res.data)\r\n                this.setState({\r\n                    user: res.data\r\n                })\r\n            })\r\n            .catch(err => console.log(err));\r\n\r\n        const token = await localStorage.getItem('usertoken');\r\n        const decoded = jwt_decode(token);\r\n\r\n        this.setState({\r\n            currentUser: decoded,\r\n        })\r\n        \r\n        /*axios.get('http://localhost:8080/contents/', {\r\n            UserId : id\r\n        }).then(res => {\r\n            console.log(res)\r\n            this.setState({\r\n                contents : res.data\r\n            })\r\n        })*/\r\n    }\r\n\r\n    onClickHandler = () => {\r\n        const data = new FormData() \r\n        data.append('id', this.state.user.id)\r\n        data.append('file', this.state.selectedFile)\r\n\r\n        axios.post(\"http://localhost:8080/upload\", data, { \r\n            onUploadProgress: ProgressEvent => {\r\n                this.setState({\r\n                  loaded: (ProgressEvent.loaded / ProgressEvent.total*100),\r\n                });\r\n            }})\r\n            .then(res => { // then print response status\r\n                console.log(res.statusText)\r\n            })\r\n            .catch(err => console.log(err))\r\n    }\r\n\r\n    onChangeHandler (event) {\r\n        this.setState({\r\n            selectedFile: event.target.files[0],\r\n            loaded: 0,\r\n        })\r\n        console.log(event.target.files[0])\r\n    }\r\n\r\n    collabore (){\r\n        this.setState({\r\n            showAvis: true,\r\n            hideCollab: false,\r\n        });\r\n\r\n        axios.put('http://localhost:8080/users/' + this.state.user.id, {\r\n            note : this.state.user.note + 1\r\n        })\r\n  \r\n    }\r\n\r\n    avis(){\r\n\r\n        axios.post('/opinion', {\r\n            firstName: 'Fred',\r\n            lastName: 'Flintstone'\r\n          })\r\n          .then(function (response) {\r\n            console.log(response);\r\n          })\r\n    }\r\n\r\n    handleChange(e){\r\n        this.setState({   \r\n            avis: e.target.value\r\n        });\r\n    }\r\n\r\n    handleSubmit(event){\r\n        event.preventDefault();\r\n        console.log(this.state.user.id, this.state.avis)\r\n        axios.post('/opinions', {\r\n            user: this.state.user.id,\r\n            avis: this.state.avis,\r\n          })\r\n\r\n          .then(function (res) {\r\n            console.log(res);\r\n          })\r\n      }\r\n\r\n    render(){\r\n\r\n        axios.put('http://localhost:8080/users/' + this.state.user.id, {\r\n            note :  this.state.user.note - 1\r\n        })\r\n    }\r\n\r\n    \r\n\r\n    render(){\r\n\r\n        const Chat = () => {\r\n            const { id } = this.props.match.params\r\n\r\n            if (this.state.currentUser.id === this.state.user.id) {\r\n                return null;\r\n            }\r\n\r\n            return (\r\n                <li>\r\n                        <Link to={{\r\n                                    pathname: `/chat/` + id\r\n                                }} \r\n                            className=\"nav-link\"\r\n                        >\r\n                            <button className=\"btn btn-block btn-ln btn-light\">\r\n                                Chat\r\n                            </button>\r\n                        </Link>\r\n                    </li>\r\n            )\r\n        }\r\n\r\n        const Vote = () => { \r\n\r\n            if (this.state.currentUser.id === this.state.user.id) {\r\n                return null;\r\n            }\r\n\r\n            return (\r\n                    <li className=\"list-group-item\">\r\n                        As-tu apprécié cet artiste? {this.state.like ? \"Tu as aimé ce profil\" : \"Tu n'as pas aimé\"}\r\n                        <button\r\n                            onClick={this.voteAime} \r\n                            type=\"submit\"\r\n                            className= \"btn btn-block btn-lg btn-success\"\r\n                        >\r\n                        J'aime      \r\n                        </button>\r\n                        <button\r\n                            onClick={this.voteAimePas} \r\n                            type=\"submit\"\r\n                            className= \"btn btn-block btn-lg btn-danger\"\r\n                        >       \r\n                        Je n'aime pas     \r\n                        </button>\r\n                    </li>\r\n                    \r\n            )\r\n\r\n        }\r\n\r\n\r\n        return(\r\n            <div>\r\n                <div className=\"videode\">\r\n                    <div className=\"video\">\r\n                    {/*<ReactPlayer width=\"100%\" url='https://www.youtube.com/watch?v=xPfP-bB3X_k' controls/>*/}\r\n                     </div>\r\n                     <div className=\"details\">\r\n                    <h2>Votre description</h2>\r\n                    <ul className=\"list-group\">\r\n                        <li className=\"list-group-item\">Nom : {this.state.user.last_name}</li>\r\n                        <li className=\"list-group-item\">Prénom : {this.state.user.first_name}</li>\r\n                        <li className=\"list-group-item\">Adresse Mail : {this.state.user.email}</li>\r\n                        <li className=\"list-group-item\">Role : {this.state.user.role}</li>\r\n                        <li className=\"list-group-item\">Description :</li>\r\n                        {\r\n                        this.state.hideCollab?\r\n                         <div>\r\n                            <button\r\n                                onClick={this.collabore} \r\n                                type=\"submit\"\r\n                                className= \"btn btn-block btn-lg btn-primary\"\r\n                                >\r\n                                Clique-ici pour écrire un avis sur cet artiste     \r\n                            </button>\r\n                        </div>\r\n                        :null\r\n                        }\r\n                        \r\n                        {\r\n                        this.state.showAvis?\r\n                        <div>\r\n                            <li className=\"list-group-item\">\r\n                                <form\r\n                                onClick={(e) => {this.handleSubmit(e)}}>\r\n                                    <label>\r\n                                        <input \r\n                                            type=\"text\" \r\n                                            value={this.state.value} \r\n                                            onChange={this.handleChange} \r\n                                            rows=\"5\"/>\r\n                                    </label>\r\n                                    <button onClick={(e) => e.preventDefault()} className=\"btn btn-block btn-lg btn-danger\" type=\"submit\">\r\n                                        Envoyer\r\n                                    </button>\r\n                                </form>\r\n                            </li>\r\n                        </div>\r\n                        :null\r\n                        }\r\n                    </ul>\r\n                    {Chat()}\r\n                    </div>\r\n                    \r\n                </div>\r\n                <div className=\"container\" onSubmit={this.handleImport}>\r\n                    <div className=\"row\">\r\n                        <div className=\"offset-md-3\">\r\n                            <label>Importez une de vos oeuvres: </label> \r\n                            <input type=\"file\" className=\"form-control-file\" onChange={this.onChangeHandler}></input>\r\n                        </div>\r\n                    </div>\r\n                    <button type=\"button\"\r\n                            onClick={this.onClickHandler}\r\n                            className=\"btn-lg\"> Importer \r\n                    </button>\r\n                    <div className=\"form-group\">\r\n        {/*<Progress max=\"100\" color=\"success\" value={this.state.loaded} >{Math.round(this.state.loaded,2) }%</Progress>*/}\r\n                    </div>\r\n                </div>\r\n                <div className=\"container\">\r\n                    {this.state.contents.map(content => {\r\n                        return <ReactAudioPlayer\r\n                        src={'http://localhost:8080/' + content.link}\r\n                        autoPlay=\"false\"\r\n                        controls\r\n                      />\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Profile;"]},"metadata":{},"sourceType":"module"}